apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: aictevalidator2validator-node
  namespace: aicte-bes
  annotations:
    flux.weave.works/automated: "false"
spec:
  releaseName: aictevalidator2validator-node
  interval: 1m
  chart:
   spec:
    chart: platforms/hyperledger-besu/charts/node_validator
    sourceRef:
      kind: GitRepository
      name: flux-prod
      namespace: flux-prod
  values:
    replicaCount: 1

    healthcheck:
      readinessthreshold: 100
      readinesscheckinterval: 5

    staticnodes:
      - "enode://1ac87561f105b6143e9f450ee167ae3b210d848062afda48cef958c2bbb7c90b574a5a14d4ace17bd9c44392a1c4260f0c30498df0be92d11cc07ec9ad77c09b@validator1.app.bharatblockchain.io:15010"
      - "enode://c992a6b03bafc512a6c694880e041c6434c64305702402eb95c676bf1b0e796670892a892fb3b62a9dd0f922726d711086ba221b1b65f266449e1363a166565d@validator2.app.bharatblockchain.io:15012"
      - "enode://3c2d9cd7e0c3dc825d972a04519b56ef6028f12dc8d44a544d518436d536d8f41783fbe33333c8f0846ae2d2197bd59378aa555aee3cceadb26292f6c0b2d4be@validator3.app.bharatblockchain.io:15014"
      - "enode://6284b2dfb53e8e6fd4222dc8badfdfc5d2a3ec80018204ba348934340569e9dd4b50cef862b627c297c54978a9283852f423e565e5beacfb086d7a7086477a2c@validator4.app.bharatblockchain.io:15016"
      - "enode://003c9188f0cbc1641a5f9e77e7a71bad9c64635199855cdb84f01b6ab6da8249837de3169963fc0bec349e621781b484e8a64a09a5730df77035dc1fd8e63273@ids.app.bharatblockchain.io:15020"

    metadata:
      namespace: aicte-bes
      labels:

    ambassador:
      external_url_suffix: app.bharatblockchain.io

    liveliness_check:
      enabled: false
    proxy:
      provider: ambassador
      external_url: aicte.app.bharatblockchain.io
      p2p: 15012
      rpc: 15013

    images:
      node: hyperledger/besu:21.10.6
      alpineutils: index.docker.io/hyperledgerlabs/alpine-utils:1.0
      pullPolicy: IfNotPresent

    node:
      name: validator2
      tls: True
      consensus: ibft
      mountPath: /opt/besu/data
      servicetype: ClusterIP
      imagePullSecret: regcred
      ports:
        p2p: 30303
        rpc: 8545
        ws: 8546

    storage:
      storageclassname: awsstorageclass
      storagesize: 1Gi

    vault:
      address: http://afaa81f5113c849ca8e7cad72f262df9-2626065.ap-south-1.elb.amazonaws.com:8200
      secretprefix: secretsv2/data/aicte-bes/crypto/validator2
      serviceaccountname: vault-auth
      keyname: data
      tlsdir: tls
      role: vault-role
      authpath: besuaicte

    genesis: ewogICJjb25maWciOiB7CiAgICAiY2hhaW5JZCI6IDIwMjMsCiAgICAiYmVybGluQmxvY2siOiAwLAogICAgImliZnQyIjogewogICAgICAiYmxvY2twZXJpb2RzZWNvbmRzIjogMiwKICAgICAgImVwb2NobGVuZ3RoIjogMzAwMDAsCiAgICAgICJyZXF1ZXN0dGltZW91dHNlY29uZHMiOiA0CiAgICB9CiAgfSwKICAibm9uY2UiOiAiMHgwIiwKICAidGltZXN0YW1wIjogIjB4NThlZTQwYmEiLAogICJnYXNMaW1pdCI6ICIweDdDRTc1Nzg1QUVFOTA4MDAiLAogICJkaWZmaWN1bHR5IjogIjB4MSIsCiAgIm1peEhhc2giOiAiMHg2Mzc0Njk2MzYxNmMyMDYyNzk3YTYxNmU3NDY5NmU2NTIwNjY2MTc1NmM3NDIwNzQ2ZjZjNjU3MjYxNmU2MzY1IiwKICAiY29pbmJhc2UiOiAiMHgwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwIiwKICAiYWxsb2MiOiB7CiAgICAiYTc1NzgzRTdhNDkyZjllRDljNTJiMzFjNkE2MUFERmRGNjJBODQxMSI6IHsKICAgICAgImJhbGFuY2UiOiAiMHhhZDc4ZWJjNWFjNjIwMDAwMCIKICAgIH0sCiAgICAiNzUwM2E3OTRBNTk4MTcyNkVDMjdEMjZGMjI0N0RjMjYxZTc2NjM0NCI6IHsKICAgICAgImJhbGFuY2UiOiAiOTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAiCiAgICB9LAogICAgIjU5MDAxQUVGRUZDRDcyQWMyNUNGYjM1RTAwQmFlZmM4NDhhQmRGODYiOiB7CiAgICAgICJiYWxhbmNlIjogIjkwMDAwMDAwMDAwMDAwMDAwMDAwMDAwIgogICAgfQogIH0sCiAgImV4dHJhRGF0YSI6ICIweGY4N2VhMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDBmODU0OTQ1OGNhMjlkMTM3NTc4NDZhZmI3Y2Y2YzY5ZGMwZjU5ZjZhZDJlYzU4OTRhODYzOGI4MjAzMzRhMDg0Mjk0OTliNTEwMmQzNDRlYTBhNjJiMGViOTQ5YTAzMDk5MzZjOWE1MDNjMWVjNTAyOGFiZjQ5MWFlY2E4NjI0NzZkOTQyOTJmMmZlMzg5Y2RhYjFjOWY2OGRmZjU1MTM2NjVmYTk2NTUzYjMzODA4NDAwMDAwMDAwYzAiCn0=
